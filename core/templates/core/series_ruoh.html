{% extends "core/base.html" %}
{% load static %}

{% block title %}Research Unit of Horrors | The Uranium Core{% endblock %}

{% block content %}

<!-- =========================
     TRANSMISSION MODAL (VIMEO)
========================== -->
<div class="player-modal" id="playerModal" aria-hidden="true">
  <div class="player-backdrop" data-close-player></div>

  <div class="player-panel" role="dialog" aria-modal="true">
    <div class="player-top">
      <div class="player-title">
        <span class="player-tag">TRANSMISSION</span>
        <span class="player-series">RUOH</span>
        <span class="player-name" id="playerTitle">PILOT</span>
      </div>

      <button class="player-close" type="button" data-close-player aria-label="Close transmission">✕</button>
    </div>

    <div class="player-frame">
      <iframe
        id="playerIframe"
        title="Research Unit of Horrors – Transmission Player"
        frameborder="0"
        allow="autoplay; fullscreen; picture-in-picture"
        allowfullscreen
      ></iframe>
    </div>
  </div>
</div>

<!-- =========================
           HERO
========================== -->
<header class="ruoh-hero">
  <div class="ruoh-hero-inner">
    <div class="ruoh-hero-left">
      <div class="ruoh-kicker">SERIES FILE</div>

      <h1 class="ruoh-title glitch" data-text="RESEARCH UNIT OF HORRORS">
        RESEARCH UNIT OF HORRORS
      </h1>

      <p class="ruoh-logline">
        Team of spooky fellas look into the deepest darkest mysteries lurking The Surface.
      </p>

      <div class="ruoh-badges">
        <span class="ruoh-badge">STATUS: ACTIVE</span>
        <span class="ruoh-badge">MEDIA: ANIMATION / COMIC / ART</span>
      </div>

      <div class="ruoh-cta">
        <a class="card-link js-open-player"
           href="#"
           data-title="RUOH PILOT // FIRST CONTACT"
           data-vimeo-id="1149281098">
          PLAY
        </a>

        <a class="btn-secondary" href="#read">READ COMIC</a>
      </div>

      <div class="ruoh-meta">
        <div class="ruoh-meta-row"><span class="ruoh-meta-key">CASE ID</span><span class="ruoh-meta-val">RUOH-01</span></div>
        <div class="ruoh-meta-row"><span class="ruoh-meta-key">LOCATION</span><span class="ruoh-meta-val">UNKNOWN</span></div>
        <div class="ruoh-meta-row"><span class="ruoh-meta-key">LAST UPDATE</span><span class="ruoh-meta-val">RECENT</span></div>
      </div>
    </div>

    <div class="ruoh-hero-right">
      <div class="ruoh-poster">
        <img
          src="{% static 'core/ResearchUnitofHorrorsTitle.png' %}"
          alt="Research Unit of Horrors"
        />
        <div class="ruoh-poster-caption">FILE PREVIEW // TITLE CARD</div>
      </div>
    </div>
  </div>
</header>

<main class="ruoh-body">

  <!-- =========================
             WATCH
  ========================== -->
  <section id="watch" class="ruoh-section">
    <header class="ruoh-section-head">
      <h2 class="ruoh-section-title">WATCH</h2>
    </header>

    <div class="ruoh-grid">
      <article class="ruoh-card ruoh-video">
        <a class="ruoh-thumbLink js-open-player"
           href="#"
           data-title="RUOH PILOT // FIRST CONTACT"
           data-vimeo-id="1149281098">
          <img class="ruoh-thumbImg"
               src="{% static 'core/ruoh/thumbs/Thumbnail_pilot.png' %}"
               alt="RUOH Pilot preview">
          <span class="ruoh-playBadge">▶ PLAY</span>
        </a>

        <div class="ruoh-card-top">
          <span class="badge">TRANSMISSION</span>
          <span class="stamp">PILOT</span>
        </div>

        <h3 class="ruoh-card-title">PILOT</h3>
        <p class="ruoh-card-text">The unit prepares for a mission and Zara finds a new monstruous friend.</p>

        <div class="ruoh-card-meta">
          <span>DURATION: 4:10</span>
          <span>FORMAT: 2D</span>
        </div>

        <a class="card-link js-open-player"
           href="#"
           data-title="RUOH PILOT"
           data-vimeo-id="1149281098">
          PLAY
        </a>
      </article>
    </div>
  </section>

      <!-- =========================
            EXPLORE
  ========================== -->
<section id="explore" class="ruoh-section">

  <header class="ruoh-section-head">
    <h2 class="ruoh-section-title">EXPLORE</h2>
  </header>

    <div class="ruoh-gallery">

<a class="ruoh-thumb ruoh-thumb--explore"
   href="{% url 'ruoh_characters' %}"
   style="--thumb: url('{% static 'core/ruoh/explore/characters.png' %}');">
  <div class="ruoh-thumb-inner">
    <div class="ruoh-thumb-label">ARCHIVE</div>
    <div class="ruoh-thumb-title">CHARACTERS</div>
  </div>
</a>

<a class="ruoh-thumb ruoh-thumb--explore"
   href="{% url 'ruoh_environments' %}"
   style="--thumb: url('{% static 'core/ruoh/explore/environments.png' %}');">
  <div class="ruoh-thumb-inner">
    <div class="ruoh-thumb-label">ARCHIVE</div>
    <div class="ruoh-thumb-title">ENVIRONMENTS</div>
  </div>
</a>

<a class="ruoh-thumb ruoh-thumb--explore"
   href="{% url 'ruoh_lore' %}"
   style="--thumb: url('{% static 'core/ruoh/explore/lore.png' %}');">
  <div class="ruoh-thumb-inner">
    <div class="ruoh-thumb-label">ARCHIVE</div>
    <div class="ruoh-thumb-title">LORE</div>
  </div>
</a>


</div>


</section>



<!-- =========================
          READ (FEATURE)
========================== -->
<section id="read" class="ruoh-section ruoh-section--read">
  <header class="ruoh-section-head ruoh-section-head--read">
    <h2 class="ruoh-section-title">READ</h2>
    <p class="ruoh-section-subtitle">
      Browse the official Research Unit of Horrors comic archive.
    </p>
  </header>

  <div class="ruoh-read-panel">
    <div class="ruoh-read-left">
      <div class="ruoh-read-badge">COMIC ARCHIVE</div>

      <h3 class="ruoh-read-title">
        RESEARCH UNIT OF HORRORS
      </h3>

      <p class="ruoh-read-copy">
        Semi-Canon comic chapters expanding the world of RUOH.
        Each book contains self-contained cases, side quests,
        and long-form arcs.
      </p>

      <a class="ruoh-read-cta" href="{% url 'ruoh_comic_archive' %}">
        OPEN COMIC ARCHIVE
      </a>
    </div>

    <div class="ruoh-read-right">
      <div class="ruoh-read-cover">
        <img
          src="{% static 'core/ruoh/comic/covers/ruoh.png' %}"
          alt="Research Unit of Horrors Comic Cover"
        />
        <div class="ruoh-read-cover-caption">
          OFFICIAL COMIC FILE
        </div>
      </div>
    </div>
  </div>
</section>



  <!-- =========================
            CONTACT
  ========================== -->
  <section id="contact" class="ruoh-section ruoh-final">
    <header class="ruoh-section-head">
      <h2 class="ruoh-section-title">CONTACT</h2>
      <p class="ruoh-section-subtitle">Interested in collaboration, voice talent, or production support?</p>
    </header>

    <div class="ruoh-final-box">
      <div class="ruoh-final-text">
        Send a message. Attach links. Keep it short. We will respond if the signal is clean.
      </div>
      <a class="btn-primary" href="mailto:ccalvo@theuraniumcore.com">SEND MESSAGE</a>
    </div>
  </section>

</main>

{% endblock %}

{% block scripts %}
<!-- =========================
      VIMEO MODAL JS
========================== -->
<script>
(function () {
  const modal = document.getElementById("playerModal");
  const iframe = document.getElementById("playerIframe");
  const titleEl = document.getElementById("playerTitle");

  if (!modal || !iframe || !titleEl) return;

  function openPlayer(btn) {
    const title = btn.dataset.title || "TRANSMISSION";
    const vimeoId = btn.dataset.vimeoId;
    const ytId = btn.dataset.ytId;

    titleEl.textContent = title;

    if (vimeoId) {
      iframe.src = `https://player.vimeo.com/video/${vimeoId}?autoplay=1&muted=0&title=0&byline=0&portrait=0`;
    } else if (ytId) {
      iframe.src = `https://www.youtube.com/embed/${ytId}?autoplay=1&rel=0`;
    } else {
      return;
    }

    modal.classList.add("is-open");
    modal.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";
  }

  function closePlayer() {
    iframe.src = "";
    modal.classList.remove("is-open");
    modal.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
  }

  document.addEventListener("click", (e) => {
    const openBtn = e.target.closest(".js-open-player");
    if (openBtn) {
      e.preventDefault();
      openPlayer(openBtn);
      return;
    }
    if (e.target.closest("[data-close-player]")) closePlayer();
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.classList.contains("is-open")) closePlayer();
  });
})();
</script>
{% endblock %}
